# 88.Learn D3ï¼šData.93

## <a name="start"></a> å¼•å­
ç»§ [Learn D3: By Example][url-pre] ç¬¬äºŒç¯‡ï¼Œåªæ˜¯è‹±æ–‡ç¿»è¯‘ï¼Œå¯ä¿®æ”¹ä»£ç çš„éƒ¨åˆ†ç”¨é™æ€å›¾ç‰‡æ›¿ä»£äº†ï¼Œæƒ³è¦å®æ—¶äº¤äº’è¯·é˜…è¯»åŸæ–‡ã€‚

- åŸæ–‡ï¼š[Learn D3: Data][url-1]
- ç‰ˆæœ¬ï¼šPublished Mar 24, 2020

## <a name="title1"></a> æ­£æ–‡
åœ¨ Observable ä¸Šæœ‰å¤šç§æ–¹æ³•å¯ä»¥[è·å–æ•°æ®][url-2]ã€‚ä½†ç”±äºæˆ‘ä»¬åˆšåˆšå¼€å§‹ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨æœ€ç®€å•çš„ï¼š[æ–‡ä»¶é™„ä»¶][url-3]ã€‚

è¿™ä¸ªç¬”è®°æœ¬æœ‰ä¸€ä¸ªåŒ…å«æ¯æ—¥æ¸©åº¦è¯»æ•°çš„ CSV æ–‡ä»¶ã€‚æˆ‘ä½¿ç”¨ Shift-Command-U â‡§âŒ˜U [é”®ç›˜å¿«æ·é”®][url-4]æ·»åŠ å®ƒï¼›ä½ è¿˜å¯ä»¥é€šè¿‡å°†æ–‡ä»¶æ‹–æ”¾åˆ°æ–‡ä»¶é™„ä»¶çª—æ ¼æ¥é™„åŠ æ–‡ä»¶ï¼Œæ–‡ä»¶é™„ä»¶çª—æ ¼å¯é€šè¿‡ç¬”è®°æœ¬èœå•æˆ–å•å‡»ä¸Šé¢çš„å›å½¢é’ˆå›¾æ ‡è®¿é—®ã€‚

![88-1][url-local-1]

`FileAttachment` å‡½æ•°ä»…è¿”å›ä¸€ä¸ªå¥æŸ„ï¼Œè¯¥å¥æŸ„å…è®¸ä½ é€‰æ‹©æ‰€éœ€çš„è¡¨ç¤ºå½¢å¼ï¼Œä¾‹å¦‚ [blob][url-5] ã€ [buffer][url-6] æˆ–ï¼ˆUTF-8ç¼–ç çš„ï¼‰æ–‡æœ¬ã€‚å¯¹äº CSV æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ `file.text` æŒ‰ç…§æƒ³è¦çš„å­—ç¬¦ä¸²å½¢å¼è·å–æ–‡ä»¶å†…å®¹ã€‚

![88-2][url-local-2]

å½“ç„¶ï¼Œæ›´æœ‰ç”¨çš„æ–¹æ³•æ˜¯å°†æ–‡æœ¬è§£æä¸ºå…·æœ‰ `date` å’Œ `temperature` å±æ€§çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ–‡æœ¬ä¼ é€’ç»™ [d3.csvParse][] æ¥å®ç°ã€‚(D3 åœ¨ä¸‹é¢çš„é™„å½•ä¸­åŠ è½½ï¼Œåœ¨ç¬”è®°æœ¬ä¸­çš„æ¯ä¸ªå•å…ƒæ ¼éƒ½å¯ç”¨ã€‚ï¼‰

å•å‡»ä¸‹é¢çš„æ•°ç»„æŸ¥çœ‹å¯¹è±¡ã€‚

![88-3][url-local-3]

è™½ç„¶ Observable éšæ€§åœ°ç­‰å¾…è·¨å•å…ƒæ ¼çš„ promises ï¼Œä½†æˆ‘ä»¬å¿…é¡»ç­‰å¾… `file.text` promise ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›è®¿é—®åŒä¸€å•å…ƒæ ¼ä¸­çš„è¿”å›å€¼ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼ŒD3 ä¸è¿›è¡Œç±»å‹æ¨æ–­ï¼Œå› æ­¤ `date` å’Œ `temperature` å±æ€§éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚è¿™ä½¿å¾—å®ƒä»¬å¾ˆéš¾ç›¸å¤„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å°è¯•ç›¸åŠ ä¸¤ä¸ªæ¸©åº¦ï¼Œå°†è¿æ¥å®ƒä»¬ã€‚å“å‘€ï¼ğŸ˜

![88-4][url-local-4]

è¦å°†è¿™äº›å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸå’Œæ•°å­—ï¼Œä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ç»™ `d3.csvParse` ã€‚æ¯è¡Œè°ƒç”¨æ­¤å‡½æ•°ï¼Œæ ¹æ®éœ€è¦æ“ä½œè¡Œçš„å¯¹è±¡ã€‚æ›´å¥½çš„åšæ³•æ˜¯ï¼Œé€šè¿‡ [d3.autoType][url-7] è‡ªåŠ¨æ¨æ–­ç±»å‹ã€‚

![88-5][url-local-5]

å¦‚æœä½ æŸ¥çœ‹ä¸Šé¢çš„æ•°ç»„ï¼Œä½ å°†çœ‹åˆ°è“è‰²çš„æ—¥æœŸå’Œæ•°å­—ï¼ˆè€Œä¸æ˜¯åŒå¼•å·ä¹‹é—´çš„è“è‰²å­—ç¬¦ä¸²ï¼‰ï¼Œè¿™å°±è¡¨æ˜ç±»å‹è½¬æ¢æˆåŠŸã€‚

è®©æˆ‘ä»¬ç¨å¾®äº†è§£ä¸€ä¸‹ Observable å•å…ƒçš„è¯­æ³•ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªçœ‹åˆ°äº†å¯ä»¥å‘½åæˆ–åŒ¿åçš„[è¡¨è¾¾å¼][]å•å…ƒæ ¼ã€‚å¯ä»¥æ£€æŸ¥è¿™ä¸¤ç§ç±»å‹çš„å•å…ƒæ ¼ï¼Œä½†åªèƒ½ä»å…¶å®ƒå•å…ƒæ ¼å¼•ç”¨å·²å‘½åçš„å•å…ƒæ ¼ã€‚

![88-6][url-local-6]
![88-7][url-local-7]
![88-8][url-local-8]

å¯¹äºæ¯”ç®€å•è¡¨è¾¾å¼æ›´å¤æ‚çš„ä»£ç ï¼Œç¼–å†™ä¸€ä¸ªå—ï¼Œè¯¥å—ç”±ä¸€ä¸ªæˆ–å¤šä¸ªç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥çš„è¯­å¥ç»„æˆã€‚å—å•å…ƒä¸å‡½æ•°ç±»ä¼¼ï¼Œä»…å½“å®ƒä»¬ return æˆ– yield æ—¶æ‰äº§ç”Ÿå€¼ã€‚å’Œè¡¨è¾¾å¼å•å…ƒä¸€æ ·ï¼Œå‘½åå—å•å…ƒå¯ä»¥ä»å…¶å®ƒå•å…ƒå¼•ç”¨ã€‚

![88-9][url-local-9]


![88-10][url-local-10]

![88-11][url-local-11]
![88-12][url-local-12]
![88-13][url-local-13]


## é™„
æå–äº†ä¸Šé¢ä¸€ä¸ªç¤ºä¾‹çš„ä¸»è¦ä»£ç ï¼Œåšäº†ä¸€ä¸ªé™æ€çš„é¡µé¢ï¼Œè§[è¿™é‡Œ][url-11]ã€‚

## <a name="reference"></a> å‚è€ƒèµ„æ–™
- [Learn D3: Data][url-1]

[url-pre]:https://github.com/XXHolic/blog/issues/92
[url-1]:https://observablehq.com/@d3/learn-d3-data?collection=@d3/learn-d3
[url-2]:https://observablehq.com/@observablehq/introduction-to-data
[url-3]:https://observablehq.com/@observablehq/file-attachments
[url-4]:https://observablehq.com/@observablehq/keyboard-shortcuts
[url-5]:https://developer.mozilla.org/en-US/docs/Web/API/Blob
[url-6]:https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer
[url-7]:https://observablehq.com/@d3/d3-autotype

[url-8]:https://observablehq.com/@d3/histogram
[url-9]:https://observablehq.com/@d3/d3-random
[url-10]:https://observablehq.com/@observablehq/how-observable-runs
[url-11]:https://xxholic.github.io/lab/blog/88/index.html


[url-local-1]:./images/88/1.png
[url-local-2]:./images/88/2.png
[url-local-3]:./images/88/3.png
[url-local-4]:./images/88/4.png
[url-local-5]:./images/88/5.png
[url-local-6]:./images/88/6.png
[url-local-7]:./images/88/7.png
[url-local-8]:./images/88/8.png
[url-local-9]:./images/88/9.png
[url-local-10]:./images/88/10.png
[url-local-11]:./images/88/11.png
[url-local-12]:./images/88/12.png
[url-local-13]:./images/88/13.png

<details>
<summary>:wastebasket:</summary>

æˆåŠŸè·å¾—èŠ³å¿ƒï¼

ç‰¹è‰ä¸æ¯”å¶å¥ˆæ³•è¦æ¸©å’Œå¾ˆå¤šã€‚

è¿™æ°æ´›ç‰¹çœŸæ˜¯å…¨éƒ½è¦å•Šã€‚

![88-poster][url-local-poster]

</details>

[url-local-poster]:./images/88/poster.jpg
