# 90.Learn D3ï¼šShapes.96

## <a name="start"></a> å¼•å­
ç»§ [Learn D3: Scales][url-pre] ç¬¬äº”ç¯‡ï¼Œåªæ˜¯è‹±æ–‡ç¿»è¯‘ï¼Œå¯ä¿®æ”¹ä»£ç çš„éƒ¨åˆ†ç”¨é™æ€å›¾ç‰‡æ›¿ä»£äº†ï¼Œæƒ³è¦å®æ—¶äº¤äº’è¯·é˜…è¯»åŸæ–‡ã€‚

- åŸæ–‡ï¼š[Learn D3: Shapes][url-1]
- ç‰ˆæœ¬ï¼šPublished Mar 24, 2020

## <a name="title1"></a> æ­£æ–‡
SVG å’Œ Canvas å…è®¸ä»»ä½•ç±»å‹çš„å›¾å½¢æ˜¯æœ‰æ„é€šç”¨çš„ï¼›ç›¸æ¯”ä¹‹ä¸‹ï¼ŒD3 ç”¨äºå¯è§†åŒ–ï¼Œå› æ­¤æä¾›äº†ä¸“é—¨çš„*å½¢çŠ¶*è¯æ±‡ï¼Œè¿™äº›å½¢çŠ¶æ˜¯ç”Ÿæˆè·¯å¾„æ•°æ®çš„å‡½æ•°ã€‚

è·¯å¾„å¯ä»¥ç”»åœ†ã€çŸ©å½¢ã€ç›´çº¿ã€æ›²çº¿ã€ä¿¯å†²åŠ¨ä½œã€è€è™ğŸ…ï¼Œ è¿˜æœ‰ä½ èƒ½æƒ³è±¡åˆ°çš„ä»»ä½•äº‹æƒ…ã€‚è·¯å¾„çš„å½¢çŠ¶ç”± [SVG è·¯å¾„æ•°æ®è¯­è¨€][url-2]ï¼ˆæˆ–ç­‰æ•ˆçš„ [Canvas è·¯å¾„æ–¹æ³•][url-3]ï¼‰æŒ‡å®šï¼Œè¿™ç±»ä¼¼äºè€å¼[ç»˜å›¾ç¬”][url-4]çš„å‘½ä»¤ã€‚ä¾‹å¦‚ï¼š
- Mx,y - ç§»åŠ¨åˆ°æŒ‡å®šç‚¹ [x,y]
- Lx,y - ç”»ä¸€æ¡çº¿åˆ°æŒ‡å®šç‚¹ [x,y]
- hx - ç”»ä¸€æ¡é•¿ä¸º x çš„æ°´å¹³çº¿
- vy - ç”»ä¸€æ¡é•¿ä¸º y çš„å‚ç›´çº¿
- z - å…³é—­å½“å‰å­è·¯å¾„

æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æƒ³æŠŠå‡ å¹´æ¥è‹¹æœçš„è‚¡ä»·æƒ³è±¡æˆä¸€ä¸ªæŠ˜çº¿å›¾ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å« *date* å’Œ *close* çš„æ•°æ®é›†ï¼ˆâ€œcloseâ€æŒ‡å¸‚åœºæ”¶ç›˜æ—¶çš„è‚¡ç¥¨ä»·æ ¼ï¼‰ï¼Œä»¥åŠç›¸åº”çš„æ¯”ä¾‹å°ºã€‚

![90-1][url-local-1]
![90-2][url-local-2]
![90-3][url-local-3]

ä¸ºäº†ç”»è¿™æ¡çº¿ï¼Œæˆ‘ä»¬éœ€è¦è·¯å¾„æ•°æ®ï¼Œç”¨ Mx,y å¼€å§‹ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªç‚¹ï¼Œç„¶åé‡å¤ Lx,y æ¥ç”»ä¸€æ¡åˆ°æ¯ä¸ªåç»­ç‚¹çš„çº¿ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ªç¯å„ç‚¹æ¥å®ç°è¿™ä¸€ç‚¹ã€‚

![90-4][url-local-4]

ä½†æ˜¯ [d3.line][url-5] æ›´æ–¹ä¾¿ã€‚è°ƒç”¨ `d3.line` å°†è¿”å›ä¸€ä¸ªé»˜è®¤çš„çº¿ç”Ÿæˆå™¨ï¼Œé€šè¿‡è°ƒç”¨ *line*.x å’Œ *line*.y ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°é…ç½®è¯¥çº¿ï¼Œä»¥è¿”å›ç»™å®šæ•°æ®ç‚¹ *d* çš„ x å’Œ y ä½ç½®ã€‚è¿™äº›å‡½æ•°æ£€ç´¢æ‰€éœ€çš„æŠ½è±¡å€¼ï¼ˆ*date* æˆ– *count*ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå¯è§†ä½ç½®ï¼ˆé€šè¿‡åº”ç”¨æ¯”ä¾‹ï¼‰ã€‚

![90-5][url-local-5]

é€šè¿‡çº¿ç”Ÿæˆå™¨ï¼Œæ•°æ®è¿”å›ç›¸åº”çš„ SVG è·¯å¾„æ•°æ®å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²å¯ç”¨äºè®¾ç½®è·¯å¾„å…ƒç´ çš„ *d* å±æ€§ã€‚

![90-6][url-local-6]
![90-7][url-local-7]

ï¼ˆä¸ºäº†é¿å…é‡å¤ï¼Œæˆ‘åœ¨ä¸‹é¢çš„é™„å½•ä¸­å®šä¹‰äº†å¯é‡ç”¨è½´ã€‚æ¯ä¸ªè½´éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºé€‰æ‹© G å…ƒç´ è¿›è¡Œå¡«å……ã€‚ï¼‰

ä¸Šé¢çš„è·¯å¾„é‡‡ç”¨è“è‰²çº¿æ¡ï¼Œæ²¡æœ‰å¡«å……ã€‚ä¸ºäº†é¿å…çº¿æ®µä¹‹é—´çš„æ–œæ¥é€ æˆè¯¯å¯¼æ€§å°–å³°ï¼Œæˆ‘å°†[æ–œæ¥][url-6]é™åˆ¶è®¾ç½®ä¸ºçº¿æ¡å®½åº¦çš„ 100%ï¼ˆ1Ã—ï¼‰ã€‚æˆ‘ä¹Ÿå¯ä»¥ä½¿ç”¨åœ†è§’çº¿è¿æ¥å’Œå°å£ã€‚

å¯¹äºåŒºåŸŸå›¾ï¼Œä¹Ÿæœ‰ç±»ä¼¼çš„ d3.area ã€‚åŒºåŸŸçš„å½¢çŠ¶æŒ‡å®šä¸ºå…·æœ‰å…±äº« *x* å€¼çš„ä¸¤æ¡çº¿ï¼š*area*.y0 ä¸ºåŸºçº¿ï¼Œ*area*.y1 ä¸ºé¡¶çº¿ã€‚å¯¹äºæ²¿å›¾è¡¨åº•éƒ¨è¾¹ç¼˜å…·æœ‰æ’å®šåŸºçº¿çš„åŒºåŸŸå›¾ï¼Œæˆ‘ä»¬å°† *area*.y0 è®¾ç½®ä¸º *y*(0) ã€‚

![90-8][url-local-8]

å¦‚æœä½ æƒ³è¦ä¸€ä¸ªå…·æœ‰å¯å˜åŸºçº¿çš„åŒºåŸŸï¼Œå¦‚ [stacked area chart][url-7]ï¼Œ[streamgraph][url-8] æˆ–ä¸‹é¢çš„ [Bollinger bands][url-9] ï¼Œç»™ *area*.y0 ä¼ é€’ä¸€ä¸ªå‡½æ•°å°±å¯ä»¥äº†ã€‚ä¸ *area*.x å’Œ *area*.y1 ä¸€æ ·ï¼Œå°†ä¸ºæ¯ä¸ªæ•°æ®ç‚¹è°ƒç”¨æ­¤å‡½æ•°ä»¥è®¡ç®—ç›¸åº”çš„ *y* å€¼ã€‚

![90-9][url-local-9]

ä¸ºäº†é€šè¿‡æ˜¾ç¤ºä¸­å¿ƒç§»åŠ¨å¹³å‡çº¿å’Œæ¯æ—¥æ”¶ç›˜ä»·æ¥å®Œæˆ Bollinger bands çš„å±•ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¶éƒ¨å åŠ çº¿ã€‚å› ä¸ºæ¯ä¸ªè·¯å¾„å…ƒç´ åªèƒ½æœ‰ä¸€ä¸ªæ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹å¤šä¸ªè·¯å¾„ä½¿ç”¨å¤šç§é¢œè‰²ã€‚

![90-10][url-local-10]

çº¿æ¡å’ŒåŒºåŸŸååŒå·¥ä½œæ—¶ï¼šå¯ä»¥é€šè¿‡åˆ†åˆ«è°ƒç”¨ *area*.lineY0 æˆ– *area*.lineY1 æ¥å¾—åˆ°ä¸åŒºåŸŸåŸºçº¿æˆ–é¡¶çº¿å¯¹åº”çš„çº¿æ¡ã€‚è¿™å¯¹äºä½¿ç”¨é¡¶éƒ¨æˆ–åº•éƒ¨çº¿æ¡è£…é¥°åŒºåŸŸéå¸¸æœ‰ç”¨ã€‚

![90-11][url-local-11]

çº¿æ¡å’ŒåŒºåŸŸæœ‰æ›´å¤šåŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨è¿™é‡Œå…¨éƒ¨ä»‹ç»ï¼Œä½†æœ‰å‡ ä¸ªæç¤ºï¼š[å¾„å‘çº¿æ¡å’ŒåŒºåŸŸ][url-10]å¯¹äºå‘¨æœŸæ€§æ•°æ®å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚[å­£èŠ‚æ€§æ¸©åº¦][url-11]ï¼›[æ›²çº¿][url-12]æä¾›å¯é…ç½®çš„æ’å€¼æ–¹æ³•ï¼Œä¾‹å¦‚ç»´æŒå•ä¸€æ€§çš„æ›²çº¿ï¼›ä½ å¯ä»¥[æ˜¾ç¤ºç¼ºå¤±æ•°æ®çš„é—´éš™][url-13]ã€‚

å½“ç„¶ï¼Œå¯è§†åŒ–ä¸ä»…ä»…æ˜¯æ¡å½¢ã€çº¿å’ŒåŒºåŸŸã€‚

å¦ä¸€ç§å¸¸è§çš„å½¢çŠ¶ D3 ç§°ä¹‹ä¸º *å¼§å½¢*ï¼ˆarcï¼‰ ï¼Œä½†æ•°å­¦å®¶ç§°ä¹‹ä¸º[ç¯å½¢æ‰‡å½¢][url-14]ã€‚å®ƒçš„ç‰¹æ€§åº”ç”¨åœ¨ [pie charts][url-15]ã€ [donut charts][url-16]ã€ [sunbursts][url-17] ï¼ˆä½†ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œä¸æ˜¯ [arc diagrams][url-18]ï¼‰ã€‚

![90-12][url-local-12]

ä¸ç›´çº¿å’ŒåŒºåŸŸç”± *x* å’Œ *y* é…ç½®çš„æ–¹å¼ç±»ä¼¼ï¼Œå¼§å½¢ç”± *innerRadius*ï¼Œ *outerRadius*ï¼Œ *startAngle*ï¼Œ *endAngle*ï¼ˆè§’åº¦ä»¥å¼§åº¦è¡¨ç¤ºï¼‰é…ç½®ã€‚ä¸Šé¢çš„å¼§å½¢ç”Ÿæˆå™¨é…ç½®ä¸ºæ¥å—ä¸€ä¸ªæ•°ç»„ `[startAngleï¼ŒendAngle]` ã€‚

![90-13][url-local-13]
![90-14][url-local-14]

å¯¹äº pie å›¾è¡¨æˆ– donut å›¾è¡¨æ¥è¯´ï¼Œå¦‚ä¸Šæ‰€è¿°è®¡ç®—å¼§è§’å¯èƒ½å¾ˆç¹çï¼Œå› æ­¤ D3 ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨æä¾›äº† [d3.pie][url-19] ã€‚å›æƒ³ä¸€ä¸‹ç¾å‘³çš„æ°´æœæ•°æ®é›†ã€‚

![90-15][url-local-15]

ä¸º pie å¸ƒå±€çš„ *count* å±æ€§é…ç½® *value* è®¿é—®å™¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å¼§è§’ï¼Œä»è€Œä½¿æ¯ä¸ªå¼§çš„è§’åº¦è·¨åº¦ä¸å…¶å€¼æˆæ¯”ä¾‹ï¼Œå¹¶ä¸”å¼§çš„æ€»è·¨åº¦ä» 0 åˆ° 2Ï€ è¿ç»­é€’å¢ã€‚

![90-16][url-local-16]

è¿™äº›æ¯ä¸ªæ•°æ®çš„å¯¹è±¡ï¼Œå¯ä»¥ä¼ é€’åˆ°å…·æœ‰å›ºå®šåŠå¾„çš„å¼§å½¢ç”Ÿæˆå™¨ï¼Œä»¥ç”Ÿæˆåœ†ç¯å›¾(å› ä¸ºæˆ‘å¿ä¸ä½æƒ³ç‚«è€€ä¸€ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä¼šä½¿ç”¨å¡«å……å’Œåœ†è§’åŠå¾„ã€‚ï¼‰

![90-17][url-local-17]
![90-18][url-local-18]

ç°åœ¨æˆ‘ä»¬å·²ç»ä»‹ç»äº†ä¸€äº›å¸¸è§çš„æ•°æ®å›¾å½¢ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è®©å®ƒä»¬åŠ¨èµ·æ¥ï¼

[Next][url-next]

## é™„å½•

![90-19][url-local-19]

## é™„
æ ¹æ®æºç ï¼Œå»é™¤äº†å¹³å°ä¾èµ–ï¼Œæå–äº†ä¸»è¦ä»£ç ï¼Œæœ‰ä»¥ä¸‹ç¤ºä¾‹ï¼š
- [ç¤ºä¾‹ 1][url-20]
- [ç¤ºä¾‹ 2][url-21]
- [ç¤ºä¾‹ 3][url-22]
- [ç¤ºä¾‹ 4][url-23]
- [ç¤ºä¾‹ 5][url-24]
- [ç¤ºä¾‹ 6][url-25]
- [ç¤ºä¾‹ 7][url-26]


## <a name="reference"></a> å‚è€ƒèµ„æ–™
- [Learn D3: Shapes][url-1]

[url-pre]:https://github.com/XXHolic/blog/issues/95
[url-next]:https://github.com/XXHolic/blog/issues/97
[url-1]:https://observablehq.com/@d3/learn-d3-shapes?collection=@d3/learn-d3
[url-2]:https://www.w3.org/TR/SVG/paths.html#TheDProperty
[url-3]:https://html.spec.whatwg.org/multipage/canvas.html#canvaspath
[url-4]:https://en.wikipedia.org/wiki/Plotter
[url-5]:https://observablehq.com/@d3/d3-line
[url-6]:https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-miterlimit
[url-7]:https://observablehq.com/@d3/stacked-area-chart
[url-8]:https://observablehq.com/@d3/streamgraph
[url-9]:https://observablehq.com/@d3/bollinger-bands
[url-10]:https://observablehq.com/@d3/d3-lineradial
[url-11]:https://observablehq.com/@d3/radial-area-chart
[url-12]:https://github.com/d3/d3-shape/blob/master/README.md#curves
[url-13]:https://observablehq.com/@d3/area-with-missing-data
[url-14]:https://en.wikipedia.org/wiki/Annulus_(mathematics)
[url-15]:https://observablehq.com/@d3/pie-chart
[url-16]:https://observablehq.com/@d3/donut-chart
[url-17]:https://observablehq.com/@d3/sunburst
[url-18]:https://observablehq.com/@d3/arc-diagram
[url-19]:https://github.com/d3/d3-shape/blob/master/README.md#pies
[url-20]:https://xxholic.github.io/lab/blog/90/index.html
[url-21]:https://xxholic.github.io/lab/blog/90/index2.html
[url-22]:https://xxholic.github.io/lab/blog/90/index3.html
[url-23]:https://xxholic.github.io/lab/blog/90/index4.html
[url-24]:https://xxholic.github.io/lab/blog/90/index5.html
[url-25]:https://xxholic.github.io/lab/blog/90/index6.html
[url-26]:https://xxholic.github.io/lab/blog/90/index7.html





[url-local-1]:./images/90/1.png
[url-local-2]:./images/90/2.png
[url-local-3]:./images/90/3.png
[url-local-4]:./images/90/4.png
[url-local-5]:./images/90/5.png
[url-local-6]:./images/90/6.png
[url-local-7]:./images/90/7.png
[url-local-8]:./images/90/8.png
[url-local-9]:./images/90/9.png
[url-local-10]:./images/90/10.png
[url-local-11]:./images/90/11.png
[url-local-12]:./images/90/12.png
[url-local-13]:./images/90/13.png
[url-local-14]:./images/90/14.png
[url-local-15]:./images/90/15.png
[url-local-16]:./images/90/16.png
[url-local-17]:./images/90/17.png
[url-local-18]:./images/90/18.png
[url-local-19]:./images/90/19.png

<details>
<summary>:wastebasket:</summary>

ç©ã€Šå·«å¸ˆ 3ã€‹ä¸»çº¿å·®ä¸å¤šæ¨è¿›äº†ä¸€åŠï¼Œç©ç€ç©ç€è¶Šæ‰“è¶Šé¡ºæ‰‹ï¼Œç„¶åå‘ç°è€æ˜¯æƒ³ç€â€œæ¨å‰§æƒ…ï¼Œæ¸…ä»»åŠ¡â€ã€‚

æœ‰ä¸€æ¬¡çªç„¶æ„è¯†åˆ°è‡ªå·±ä¼¼ä¹é™·å…¥åˆ°ä¸€ç§â€œä¸Šç˜¾â€çš„çŠ¶æ€ï¼Œåªæ˜¯æƒ³ä¸€å‘³çš„æ‰¾ä¸ªç›®æ ‡æ¨è¿›ï¼Œç„¶åäº§ç”Ÿä¸€ä¸è‡ªæˆ‘æ»¡è¶³çš„æˆå°±æ„Ÿã€‚

æœ‰æ—¶å€™æ—¶é—´é•¿äº†è‡ªå·±åè€Œæ„Ÿè§‰åˆ°æ²¡åŠ²ï¼Œæœ‰å¿…è¦åæ€ä¸‹è‡ªå·±è¯¥å¦‚ä½•å»ç©ä¸€ä¸ªæ¸¸æˆï¼š
- æ¸¸æˆçš„ä¸–ç•Œè§‚åŠè®¾å®šäº†è§£åŠæ€è€ƒå’Œæƒ³è±¡ã€‚
- æ¸¸æˆçš„æ“ä½œåŠæˆ˜æ–—ï¼Œèµ‹èƒ½ç­‰åŸºæœ¬ç³»ç»Ÿè®¾ç½®çš„ä½“éªŒï¼Œæœ‰æ„è¯†çš„å»æ€è€ƒæ¢ç´¢ï¼Œå‘ç°ä¸åŒçš„ç»„åˆç©æ³•ã€‚
- å…³æ³¨åˆ†æ”¯æ•…äº‹çš„è®¾è®¡åŠè®²è¿°ã€‚
- å¦‚æœæœ‰ç©è¿‡åŒç±»å‹æ¸¸æˆï¼Œç›¸äº’æ¯”è¾ƒä¸€ä¸‹ï¼Œæœ‰åŠ©äºå‡å°‘èµ°è¿‡å¤šå¼¯è·¯ã€‚


</details>
